var e=globalThis.parcelRequire10c2;(0,e.register)("gThft",function(t,r){Object.defineProperty(t.exports,"__esModule",{value:!0,configurable:!0}),Object.defineProperty(t.exports,"default",{get:()=>o,set:void 0,enumerable:!0,configurable:!0});var s=e("ayMG0"),n=e("acw62"),l=e("aphAM"),a=e("73MNt"),o=()=>{let{userid:e}=(0,l.useParams)(),t=(0,n.useRef)(null),[r,o]=(0,n.useState)([]),[i,u]=(0,n.useState)(""),[c,d]=(0,n.useState)(!1);(0,n.useEffect)(()=>(t.current=(0,a.io)("http://localhost:8000",{withCredentials:!0}),t.current.emit("join-room",e),t.current.on("previous-messages",e=>{o(e)}),t.current.on("user-typing",e=>{d(!0),setTimeout(()=>d(!1),2e3)}),t.current.on("receive-message",e=>{o(t=>[...t,{content:e,sender:"other"}])}),()=>t.current.disconnect()),[e]);let m=()=>{""!==i.trim()&&(console.log(e,i+"sender"+e),t.current.emit("send-message",{room:e,message:i,senderId:"",receiverId:e}),o(e=>[...e,{content:i,sender:"you"}]),u(""))};return(0,s.jsxs)("div",{className:"max-w-md w-full mx-auto p-4 min-h-screen flex flex-col",children:[(0,s.jsx)("h3",{className:"text-2xl font-semibold mb-4 text-center",children:"\uD83D\uDCAC Simple Chat"}),(0,s.jsx)("div",{className:"flex-1 bg-gray-100 p-4 rounded-lg shadow-inner overflow-y-auto mb-4",style:{maxHeight:"400px",minHeight:"300px"},children:0===r.length?(0,s.jsx)("p",{className:"text-center text-gray-500",children:"No messages yet."}):r.map((t,r)=>(0,s.jsx)("div",{className:`mb-2 flex ${t.senderId===e?"justify-end":"justify-start"}`,children:(0,s.jsx)("span",{className:`inline-block px-4 py-2 max-w-xs break-words rounded-lg text-sm ${t.senderId===e?"bg-blue-600 text-white":"bg-gray-300 text-gray-900"}`,children:t.content})},r))}),(0,s.jsxs)("div",{className:"flex w-full",children:[(0,s.jsx)("input",{value:i,onChange:r=>{u(r.target.value),t.current&&t.current.emit("user-typing",e)},onKeyDown:e=>"Enter"===e.key&&m(),placeholder:"Type a message...",className:"flex-1 px-4 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-400"}),(0,s.jsx)("button",{onClick:m,className:"bg-blue-600 text-white px-6 py-2 rounded-r-lg hover:bg-blue-700 transition",children:"Send"})]})]})}});
//# sourceMappingURL=Chat_Admin_page.9c8089b7.js.map
