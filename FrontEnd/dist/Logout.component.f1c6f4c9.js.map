{"mappings":"A,I,E,A,W,iB,C,A,C,E,E,Q,A,E,Q,S,C,C,C,E,O,c,C,E,O,C,a,C,M,C,E,a,C,C,G,O,c,C,E,O,C,U,C,I,I,E,I,K,E,W,C,E,a,C,C,G,I,E,E,S,E,E,S,E,E,S,E,E,S,E,E,S,E,E,S,E,E,S,E,E,S,E,E,SCuFA,EA3Ee,KAEb,IAAM,EAAW,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,IACX,CAAC,EAAS,EAAW,CAAG,AAAA,CAAA,EAAA,EAAA,QAAO,AAAP,EAAS,CAAA,GACjC,CAAC,EAAe,EAAiB,CAAG,AAAA,CAAA,EAAA,EAAA,QAAO,AAAP,EAAS,IAC7C,CAAA,gBAAC,CAAe,CAAC,CAAC,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,EAAY,AAAC,GAAQ,EAAM,SAAS,EACtD,EAAS,AAAA,CAAA,EAAA,EAAA,WAAU,AAAV,IAET,EAAgB,UACpB,GAAI,CAIF,IAAM,EAAS,MAAM,AAAA,EAAA,OAAI,CAAE,IAAI,CAC7B,2CACA,CAAC,EACD,CACE,QAAS,CACP,eAAgB,kBAClB,EACA,gBAAiB,CAAA,CACnB,GAGF,QAAQ,GAAG,CAAC,WAAY,GACpB,GAAQ,MAAM,SAChB,EAAS,AAAA,CAAA,EAAA,EAAA,oBAAmB,AAAnB,KAET,AAAA,EAAA,KAAI,CAAE,OAAO,CAAC,EAAO,IAAI,CAAC,OAAO,EACjC,EAAS,AAAA,CAAA,EAAA,EAAA,SAAQ,AAAR,KACT,EAAiB,2BAMjB,AAAA,EAAA,KAAI,CAAE,KAAK,CAAC,EAAO,IAAI,CAAC,OAAO,EAC/B,EAAiB,qCACjB,EAAS,SAEb,CAAE,MAAO,EAAO,CACd,AAAA,EAAA,KAAI,CAAE,KAAK,CAAC,EAAM,OAAO,EAAI,iBAC7B,EAAiB,oCACjB,EAAS,SACX,QAAU,CACR,EAAW,CAAA,EACb,CACF,EAMA,MAJA,AAAA,CAAA,EAAA,EAAA,SAAQ,AAAR,EAAU,KACR,GACF,EAAG,EAAE,EAGH,AAAA,CAAA,EAAA,EAAA,GAAA,AAAA,EAAC,MADH,CACO,UAAU,4CACZ,SAAA,EACC,AAAA,CAAA,EAAA,EAAA,GAAA,AAAA,EAAC,EAAA,IAAG,CADL,CAEG,OAAQ,GACR,MAAO,GACP,MAAM,OACN,aAAc,CAAC,EACf,aAAa,GACb,QAAS,CAAA,EACT,UAAU,eACV,eAAe,YACf,YAAa,EACb,qBAAsB,CAGxB,GAAA,AAAA,CAAA,EAAA,EAAA,GAAA,AAAA,EAAC,KAAD,CAAI,UAAU,qBAAsB,SAAA,C,E,EAI5C,C","sources":["<anon>","Components/Logout.component.js"],"sourcesContent":["\nfunction $parcel$defineInteropFlag(a) {\n  Object.defineProperty(a, '__esModule', {value: true, configurable: true});\n}\n\nfunction $parcel$export(e, n, v, s) {\n  Object.defineProperty(e, n, {get: v, set: s, enumerable: true, configurable: true});\n}\n\n      var $parcel$global = globalThis;\n    var parcelRequire = $parcel$global[\"parcelRequire10c2\"];\nvar parcelRegister = parcelRequire.register;\nparcelRegister(\"hfz6U\", function(module, exports) {\n\n$parcel$defineInteropFlag(module.exports);\n\n$parcel$export(module.exports, \"default\", () => $c8ef1291221346f1$export$2e2bcd8739ae039);\n\nvar $ayMG0 = parcelRequire(\"ayMG0\");\n\nvar $acw62 = parcelRequire(\"acw62\");\n\nvar $lzNIT = parcelRequire(\"lzNIT\");\n\nvar $9KNE7 = parcelRequire(\"9KNE7\");\n\nvar $fmRoT = parcelRequire(\"fmRoT\");\n\nvar $f9fXS = parcelRequire(\"f9fXS\");\n\nvar $7jD0c = parcelRequire(\"7jD0c\");\n\nvar $6QpOD = parcelRequire(\"6QpOD\");\n\nvar $iClEJ = parcelRequire(\"iClEJ\");\n// import { removeall } from \"../Utils/Store/applicationSlice\"\nconst $c8ef1291221346f1$var$Logout = ()=>{\n    // const { userdata, setuserdata, setuser, setbio } = useContext(use_user_info);\n    const navigate = (0, $lzNIT.useNavigate)();\n    const [loading, setLoading] = (0, $acw62.useState)(true);\n    const [logoutMessage, setLogoutMessage] = (0, $acw62.useState)(\"\");\n    const { userdata_global: userdata_global } = (0, $7jD0c.useSelector)((store)=>store.userslice);\n    const dispatch = (0, $7jD0c.useDispatch)();\n    const performLogout = async ()=>{\n        try {\n            const result = await (0, $fmRoT.default).post(\"http://localhost:8000/api/v1/user/logout\", {}, {\n                headers: {\n                    \"Content-Type\": \"application/json\"\n                },\n                withCredentials: true\n            });\n            console.log(\"result->\", result);\n            if (result?.data?.success) {\n                dispatch((0, $6QpOD.clearuserdata_global)());\n                (0, $9KNE7.toast).success(result.data.message);\n                dispatch((0, $iClEJ.removeall)());\n                setLogoutMessage(\"Logout is successful!\");\n                // setuserdata(null); // Using null for clarity\n                //setuser(null);\n                //setbio(null);\n                navigate(\"/login\"); // Navigate immediately after success\n            } else {\n                (0, $9KNE7.toast).error(result.data.message);\n                setLogoutMessage(\"Logout failed. Please try again.\");\n                navigate(\"/login\"); // Navigate immediately after failure\n            }\n        } catch (error) {\n            (0, $9KNE7.toast).error(error.message || \"Logout failed\");\n            setLogoutMessage(\"Logout failed. Please try again.\");\n            navigate(\"/login\"); // Navigate immediately after error\n        } finally{\n            setLoading(false);\n        }\n    };\n    (0, $acw62.useEffect)(()=>{\n        performLogout();\n    }, []); // Empty dependency array ensures this runs only once\n    return /*#__PURE__*/ (0, $ayMG0.jsx)(\"div\", {\n        className: \"flex items-center justify-center h-screen\",\n        children: loading ? /*#__PURE__*/ (0, $ayMG0.jsx)((0, $f9fXS.Oval), {\n            height: 80,\n            width: 80,\n            color: \"blue\",\n            wrapperStyle: {},\n            wrapperClass: \"\",\n            visible: true,\n            ariaLabel: \"oval-loading\",\n            secondaryColor: \"lightblue\",\n            strokeWidth: 2,\n            strokeWidthSecondary: 2\n        }) : /*#__PURE__*/ (0, $ayMG0.jsx)(\"h1\", {\n            className: \"text-2xl font-bold\",\n            children: logoutMessage\n        })\n    });\n};\nvar $c8ef1291221346f1$export$2e2bcd8739ae039 = $c8ef1291221346f1$var$Logout;\n\n});\n\n\n//# sourceMappingURL=Logout.component.f1c6f4c9.js.map\n","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n// import use_user_info from \"../Utils/use_user_info.utils.js\";\r\nimport { toast } from \"react-toastify\";\r\nimport axios from \"axios\";\r\nimport { Oval } from 'react-loader-spinner';\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {setuserdata_global,clearuserdata_global} from \"../Utils/Store/userslice\"\r\nimport applicationSlice, {removeall, addapplication } from \"../Utils/Store/applicationSlice\";\r\n\r\n// import { removeall } from \"../Utils/Store/applicationSlice\"\r\n\r\nconst Logout = () => {\r\n  // const { userdata, setuserdata, setuser, setbio } = useContext(use_user_info);\r\n  const navigate = useNavigate();\r\n  const [loading, setLoading] = useState(true);\r\n  const [logoutMessage, setLogoutMessage] = useState(\"\");\r\n  const {userdata_global}=useSelector((store)=>store.userslice);\r\n  const dispatch=useDispatch()\r\n\r\n  const performLogout = async () => {\r\n    try {\r\n    \r\n     \r\n\r\n      const result = await axios.post(\r\n        \"http://localhost:8000/api/v1/user/logout\",\r\n        {},\r\n        {\r\n          headers: {\r\n            \"Content-Type\": \"application/json\",\r\n          },\r\n          withCredentials: true,\r\n        }\r\n      );\r\n\r\n      console.log(\"result->\", result);\r\n      if (result?.data?.success) {\r\n        dispatch(clearuserdata_global());\r\n     \r\n        toast.success(result.data.message);\r\n        dispatch(removeall())\r\n        setLogoutMessage(\"Logout is successful!\");\r\n       // setuserdata(null); // Using null for clarity\r\n        //setuser(null);\r\n        //setbio(null);\r\n        navigate(\"/login\"); // Navigate immediately after success\r\n      } else {\r\n        toast.error(result.data.message);\r\n        setLogoutMessage(\"Logout failed. Please try again.\");\r\n        navigate(\"/login\"); // Navigate immediately after failure\r\n      }\r\n    } catch (error) {\r\n      toast.error(error.message || \"Logout failed\");\r\n      setLogoutMessage(\"Logout failed. Please try again.\");\r\n      navigate(\"/login\"); // Navigate immediately after error\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    performLogout();\r\n  }, []); // Empty dependency array ensures this runs only once\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center h-screen\">\r\n      {loading ? (\r\n        <Oval\r\n          height={80}\r\n          width={80}\r\n          color=\"blue\"\r\n          wrapperStyle={{}}\r\n          wrapperClass=\"\"\r\n          visible={true}\r\n          ariaLabel=\"oval-loading\"\r\n          secondaryColor=\"lightblue\"\r\n          strokeWidth={2}\r\n          strokeWidthSecondary={2}\r\n        />\r\n      ) : (\r\n        <h1 className=\"text-2xl font-bold\">{logoutMessage}</h1>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Logout;\r\n"],"names":["parcelRequire","$parcel$global","globalThis","parcelRegister","register","module","exports","Object","defineProperty","value","configurable","get","$c8ef1291221346f1$export$2e2bcd8739ae039","set","s","enumerable","$ayMG0","$acw62","$lzNIT","$9KNE7","$fmRoT","$f9fXS","$7jD0c","$6QpOD","$iClEJ","navigate","useNavigate","loading","setLoading","useState","logoutMessage","setLogoutMessage","userdata_global","useSelector","store","userslice","dispatch","useDispatch","performLogout","result","default","post","headers","withCredentials","console","log","data","success","clearuserdata_global","toast","message","removeall","error","useEffect","jsx","className","children","Oval","height","width","color","wrapperStyle","wrapperClass","visible","ariaLabel","secondaryColor","strokeWidth","strokeWidthSecondary"],"version":3,"file":"Logout.component.f1c6f4c9.js.map"}